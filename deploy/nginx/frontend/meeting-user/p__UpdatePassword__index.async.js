"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[191],{19046:function(Z,i,e){var r=e(4386),a=e(10066),p=e(77529),l=e(79115),c=e(67194),b=e(76294),R=e(83157),f=e(90429),d=e(93236),x=e(39476),P=e(62086),M=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],n=d.forwardRef(function(_,g){var j=b.Z.useFormInstance(),K=(0,d.useState)(_.countDown||60),E=(0,c.Z)(K,2),G=E[0],F=E[1],S=(0,d.useState)(!1),W=(0,c.Z)(S,2),L=W[0],I=W[1],z=(0,d.useState)(),w=(0,c.Z)(z,2),$=w[0],h=w[1],m=_.rules,v=_.name,C=_.phoneName,o=_.fieldProps,D=_.captchaTextRender,y=D===void 0?function(s,U){return s?"".concat(U," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:D,B=_.captchaProps,T=(0,l.Z)(_,M),N=function(){var s=(0,p.Z)((0,a.Z)().mark(function U(A){return(0,a.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,h(!0),O.next=4,T.onGetCaptcha(A);case 4:h(!1),I(!0),O.next=13;break;case 8:O.prev=8,O.t0=O.catch(0),I(!1),h(!1),console.log(O.t0);case 13:case"end":return O.stop()}},U,null,[[0,8]])}));return function(A){return s.apply(this,arguments)}}();return(0,d.useImperativeHandle)(g,function(){return{startTiming:function(){return I(!0)},endTiming:function(){return I(!1)}}}),(0,d.useEffect)(function(){var s=0,U=_.countDown;return L&&(s=window.setInterval(function(){F(function(A){return A<=1?(I(!1),clearInterval(s),U||60):A-1})},1e3)),function(){return clearInterval(s)}},[L]),(0,P.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},o==null?void 0:o.style),{},{display:"flex",alignItems:"center"}),ref:g,children:[(0,P.jsx)(R.Z,(0,r.Z)((0,r.Z)({},o),{},{style:{flex:1,transition:"width .3s",marginRight:8}})),(0,P.jsx)(f.ZP,(0,r.Z)((0,r.Z)({style:{display:"block"},disabled:L,loading:$},B),{},{onClick:(0,p.Z)((0,a.Z)().mark(function s(){var U;return(0,a.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,!C){u.next=9;break}return u.next=4,j.validateFields([C].flat(1));case 4:return U=j.getFieldValue([C].flat(1)),u.next=7,N(U);case 7:u.next=11;break;case 9:return u.next=11,N("");case 11:u.next=16;break;case 13:u.prev=13,u.t0=u.catch(0),console.log(u.t0);case 16:case"end":return u.stop()}},s,null,[[0,13]])})),children:y(L,G)}))]})}),t=(0,x.G)(n);i.Z=t},61374:function(Z,i,e){var r=e(4386),a=e(79115),p=e(93236),l=e(56562),c=e(62086),b=["fieldProps","proFieldProps"],R=["fieldProps","proFieldProps"],f="text",d=function(n){var t=n.fieldProps,_=n.proFieldProps,g=(0,a.Z)(n,b);return(0,c.jsx)(l.Z,(0,r.Z)({valueType:f,fieldProps:t,filedConfig:{valueType:f},proFieldProps:_},g))},x=function(n){var t=n.fieldProps,_=n.proFieldProps,g=(0,a.Z)(n,R);return(0,c.jsx)(l.Z,(0,r.Z)({valueType:"password",fieldProps:t,proFieldProps:_,filedConfig:{valueType:f}},g))},P=d;P.Password=x,P.displayName="ProFormComponent",i.Z=P},71590:function(Z,i,e){e.r(i);var r=e(3447),a=e.n(r),p=e(37066),l=e.n(p),c=e(85851),b=e.n(c),R=e(90887),f=e.n(R),d=e(78503),x=e.n(d),P=e(8040),M=e(61374),n=e(19046),t=e(43579),_=e(92466),g=e(81296),j=e(41122),K=e(83132),E=e(62086),G=["confirmPassword"],F,S=K.styled.div(F||(F=x()([`
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
`]))),W=function(I){var z=(0,K.useNavigate)(),w=function(){var h=f()(a()().mark(function m(v){var C,o,D,y,B,T;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return C=v.confirmPassword,o=b()(v,G),s.next=3,(0,_.Z)((0,t.gQ)(o));case 3:D=s.sent,y=l()(D,2),B=y[0],T=y[1],(0,g.Z)(B)?(j.ZP.success(T),z("/login")):j.ZP.error(B);case 8:case"end":return s.stop()}},m)}));return function(v){return h.apply(this,arguments)}}(),$=function(){var h=f()(a()().mark(function m(v){var C,o,D,y;return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,_.Z)((0,t.T3)(v));case 2:C=T.sent,o=l()(C,2),D=o[0],y=o[1],console.log(D,y),(0,g.Z)(D)?j.ZP.success(y):j.ZP.error(D);case 8:case"end":return T.stop()}},m)}));return function(v){return h.apply(this,arguments)}}();return(0,E.jsx)(S,{children:(0,E.jsxs)(P.A,{layout:"vertical",onFinish:w,submitter:{searchConfig:{submitText:"\u4FEE\u6539"},resetButtonProps:{style:{display:"none"}},submitButtonProps:{style:{width:"100%"}}},children:[(0,E.jsx)(M.Z,{width:"md",name:"username",label:"\u7528\u6237\u540D",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]}),(0,E.jsx)(M.Z,{width:"md",name:"email",label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}]}),(0,E.jsx)(n.Z,{label:"\u9A8C\u8BC1\u7801",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(m,v){return m?"".concat(v," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",phoneName:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],onGetCaptcha:$}),(0,E.jsx)(M.Z.Password,{width:"md",name:"password",label:"\u5BC6\u7801",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]}),(0,E.jsx)(M.Z.Password,{width:"md",name:"confirmPassword",label:"\u786E\u8BA4\u5BC6\u7801",placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",dependencies:["password"],rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"},function(h){var m=h.getFieldValue;return{validator:function(C,o){return!o||m("password")===o?Promise.resolve():(console.log(m("password")===o),Promise.reject(new Error("\u786E\u8BA4\u5BC6\u7801\u4E0E\u5BC6\u7801\u4E0D\u5339\u914D!")))}}}]})]})})};W.defaultProps={},i.default=W},43579:function(Z,i,e){e.d(i,{bG:function(){return b},z2:function(){return p},fj:function(){return a},gQ:function(){return c},T3:function(){return l},gS:function(){return R},uE:function(){return f}});var r=e(83132),a=function(t){return(0,r.request)("/user/register-captcha",{method:"GET",params:{address:t}})},p=function(t){return(0,r.request)("/user/register",{method:"POST",data:t})},l=function(t){return(0,r.request)("/user/update_password/captcha",{method:"GET",params:{address:t}})},c=function(t){return(0,r.request)("/user/update_password",{method:"POST",data:t})},b=function(){return(0,r.request)("/user/info")},R=function(t){return(0,r.request)("/user/update",{method:"POST",data:t})},f=function(){return(0,r.request)("/user/update/captcha")},d=e(3447),x=e(90887),P=e(51273),M=null},92466:function(Z,i,e){function r(a,p){return a.then(function(l){return[null,l]}).catch(function(l){return p&&Object.assign(l,p),[l,void 0]})}i.Z=r},81296:function(Z,i){function e(r){return r===null}i.Z=e}}]);
