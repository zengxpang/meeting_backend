"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[996],{19046:function(W,p,e){var t=e(4386),i=e(10066),P=e(77529),d=e(79115),E=e(67194),y=e(76294),I=e(83157),C=e(90429),v=e(93236),R=e(39476),g=e(62086),M=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],a=v.forwardRef(function(c,D){var N=y.Z.useFormInstance(),X=(0,v.useState)(c.countDown||60),w=(0,E.Z)(X,2),V=w[0],z=w[1],H=(0,v.useState)(!1),A=(0,E.Z)(H,2),Z=A[0],F=A[1],_=(0,v.useState)(),S=(0,E.Z)(_,2),J=S[0],j=S[1],O=c.rules,Q=c.name,G=c.phoneName,B=c.fieldProps,K=c.captchaTextRender,u=K===void 0?function(f,o){return f?"".concat(o," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:K,$=c.captchaProps,x=(0,d.Z)(c,M),U=function(){var f=(0,P.Z)((0,i.Z)().mark(function o(n){return(0,i.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,j(!0),s.next=4,x.onGetCaptcha(n);case 4:j(!1),F(!0),s.next=13;break;case 8:s.prev=8,s.t0=s.catch(0),F(!1),j(!1),console.log(s.t0);case 13:case"end":return s.stop()}},o,null,[[0,8]])}));return function(n){return f.apply(this,arguments)}}();return(0,v.useImperativeHandle)(D,function(){return{startTiming:function(){return F(!0)},endTiming:function(){return F(!1)}}}),(0,v.useEffect)(function(){var f=0,o=c.countDown;return Z&&(f=window.setInterval(function(){z(function(n){return n<=1?(F(!1),clearInterval(f),o||60):n-1})},1e3)),function(){return clearInterval(f)}},[Z]),(0,g.jsxs)("div",{style:(0,t.Z)((0,t.Z)({},B==null?void 0:B.style),{},{display:"flex",alignItems:"center"}),ref:D,children:[(0,g.jsx)(I.Z,(0,t.Z)((0,t.Z)({},B),{},{style:{flex:1,transition:"width .3s",marginRight:8}})),(0,g.jsx)(C.ZP,(0,t.Z)((0,t.Z)({style:{display:"block"},disabled:Z,loading:J},$),{},{onClick:(0,P.Z)((0,i.Z)().mark(function f(){var o;return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!G){r.next=9;break}return r.next=4,N.validateFields([G].flat(1));case 4:return o=N.getFieldValue([G].flat(1)),r.next=7,U(o);case 7:r.next=11;break;case 9:return r.next=11,U("");case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0);case 16:case"end":return r.stop()}},f,null,[[0,13]])})),children:u(Z,V)}))]})}),l=(0,R.G)(a);p.Z=l},61374:function(W,p,e){var t=e(4386),i=e(79115),P=e(93236),d=e(56562),E=e(62086),y=["fieldProps","proFieldProps"],I=["fieldProps","proFieldProps"],C="text",v=function(a){var l=a.fieldProps,c=a.proFieldProps,D=(0,i.Z)(a,y);return(0,E.jsx)(d.Z,(0,t.Z)({valueType:C,fieldProps:l,filedConfig:{valueType:C},proFieldProps:c},D))},R=function(a){var l=a.fieldProps,c=a.proFieldProps,D=(0,i.Z)(a,I);return(0,E.jsx)(d.Z,(0,t.Z)({valueType:"password",fieldProps:l,proFieldProps:c,filedConfig:{valueType:C}},D))},g=v;g.Password=R,g.displayName="ProFormComponent",p.Z=g},40810:function(W,p,e){e.r(p),e.d(p,{default:function(){return K}});var t=e(3447),i=e.n(t),P=e(37066),d=e.n(P),E=e(90887),y=e.n(E),I=e(78503),C=e.n(I),v=e(8040),R=e(61374),g=e(19046),M=e(93236),a=e(58559),l=function(u){return u!==null&&typeof u=="object"},c=function(u){return typeof u=="function"},D=function(u){return typeof u=="string"},N=function(u){return typeof u=="boolean"},X=function(u){return typeof u=="number"},w=function(u){return typeof u=="undefined"};function V(u){return c(u[Symbol.asyncIterator])}function z(u,$){(0,M.useEffect)(function(){var x=u(),U=!1;function f(){return(0,a.mG)(this,void 0,void 0,function(){var o;return(0,a.Jh)(this,function(n){switch(n.label){case 0:if(!V(x))return[3,4];n.label=1;case 1:return[4,x.next()];case 2:return o=n.sent(),o.done||U?[3,3]:[3,1];case 3:return[3,6];case 4:return[4,x];case 5:n.sent(),n.label=6;case 6:return[2]}})})}return f(),function(){U=!0}},$)}var H=z,A=e(92466),Z=e(41122),F=e(76294),_=e(81296),S=e(37208),J=e(83132),j=e(43579),O=e(62086),Q,G=J.styled.div(Q||(Q=C()([`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
`]))),B=function($){var x=(0,M.useRef)();H(y()(i()().mark(function o(){var n,r,s,h,T;return i()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,A.Z)((0,j.bG)());case 2:n=m.sent,r=d()(n,2),s=r[0],h=r[1],(0,_.Z)(s)&&((T=x.current)===null||T===void 0||T.setFieldsValue({nickName:h.nickName,headPic:h.headPic,email:h.email}));case 7:case"end":return m.stop()}},o)})),[]);var U=function(){var o=y()(i()().mark(function n(r){var s,h,T,L,m;return i()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return s={nickName:r.nickName,headPic:r.headPic,email:r.email,captcha:r.captcha},b.next=3,(0,A.Z)((0,j.gS)(s));case 3:h=b.sent,T=d()(h,2),L=T[0],m=T[1],(0,_.Z)(L)?Z.ZP.success(m):Z.ZP.error(L);case 8:case"end":return b.stop()}},n)}));return function(r){return o.apply(this,arguments)}}(),f=function(){var o=y()(i()().mark(function n(){var r,s,h,T;return i()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,A.Z)((0,j.uE)());case 2:r=m.sent,s=d()(r,2),h=s[0],T=s[1],(0,_.Z)(h)?Z.ZP.success(T):Z.ZP.error(h);case 7:case"end":return m.stop()}},n)}));return function(){return o.apply(this,arguments)}}();return(0,O.jsx)(G,{children:(0,O.jsxs)(v.A,{layout:"vertical",onFinish:U,formRef:x,submitter:{searchConfig:{submitText:"\u4FEE\u6539"},resetButtonProps:{style:{display:"none"}},submitButtonProps:{style:{width:"100%"}}},children:[(0,O.jsx)(F.Z.Item,{name:"headPic",label:"\u5934\u50CF",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5934\u50CF"}],children:(0,O.jsx)(S.ab,{})}),(0,O.jsx)(R.Z,{width:"md",name:"nickName",label:"\u6635\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0"}]}),(0,O.jsx)(R.Z,{width:"md",name:"email",label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",fieldProps:{disabled:!0},rules:[{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740"},{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}]}),(0,O.jsx)(g.Z,{label:"\u9A8C\u8BC1\u7801",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(n,r){return n?"".concat(r," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",phoneName:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],onGetCaptcha:f})]})})};B.defaultProps={};var K=B},43579:function(W,p,e){e.d(p,{bG:function(){return y},z2:function(){return P},fj:function(){return i},gQ:function(){return E},T3:function(){return d},gS:function(){return I},uE:function(){return C}});var t=e(83132),i=function(l){return(0,t.request)("/user/register-captcha",{method:"GET",params:{address:l}})},P=function(l){return(0,t.request)("/user/register",{method:"POST",data:l})},d=function(l){return(0,t.request)("/user/update_password/captcha",{method:"GET",params:{address:l}})},E=function(l){return(0,t.request)("/user/update_password",{method:"POST",data:l})},y=function(){return(0,t.request)("/user/info")},I=function(l){return(0,t.request)("/user/update",{method:"POST",data:l})},C=function(){return(0,t.request)("/user/update/captcha")},v=e(3447),R=e(90887),g=e(51273),M=null},92466:function(W,p,e){function t(i,P){return i.then(function(d){return[null,d]}).catch(function(d){return P&&Object.assign(d,P),[d,void 0]})}p.Z=t},81296:function(W,p){function e(t){return t===null}p.Z=e}}]);
