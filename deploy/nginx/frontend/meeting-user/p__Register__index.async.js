"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[845],{19046:function(W,m,e){var r=e(4386),s=e(10066),g=e(77529),u=e(79115),h=e(67194),b=e(76294),j=e(83157),E=e(90429),p=e(93236),x=e(39476),v=e(62086),D=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],n=p.forwardRef(function(_,O){var R=b.Z.useFormInstance(),K=(0,p.useState)(_.countDown||60),l=(0,h.Z)(K,2),S=l[0],F=l[1],w=(0,p.useState)(!1),G=(0,h.Z)(w,2),I=G[0],U=G[1],N=(0,p.useState)(),z=(0,h.Z)(N,2),$=z[0],L=z[1],B=_.rules,f=_.name,i=_.phoneName,T=_.fieldProps,d=_.captchaTextRender,C=d===void 0?function(c,a){return c?"".concat(a," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:d,y=_.captchaProps,Z=(0,u.Z)(_,D),P=function(){var c=(0,g.Z)((0,s.Z)().mark(function a(A){return(0,s.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,L(!0),M.next=4,Z.onGetCaptcha(A);case 4:L(!1),U(!0),M.next=13;break;case 8:M.prev=8,M.t0=M.catch(0),U(!1),L(!1),console.log(M.t0);case 13:case"end":return M.stop()}},a,null,[[0,8]])}));return function(A){return c.apply(this,arguments)}}();return(0,p.useImperativeHandle)(O,function(){return{startTiming:function(){return U(!0)},endTiming:function(){return U(!1)}}}),(0,p.useEffect)(function(){var c=0,a=_.countDown;return I&&(c=window.setInterval(function(){F(function(A){return A<=1?(U(!1),clearInterval(c),a||60):A-1})},1e3)),function(){return clearInterval(c)}},[I]),(0,v.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},T==null?void 0:T.style),{},{display:"flex",alignItems:"center"}),ref:O,children:[(0,v.jsx)(j.Z,(0,r.Z)((0,r.Z)({},T),{},{style:{flex:1,transition:"width .3s",marginRight:8}})),(0,v.jsx)(E.ZP,(0,r.Z)((0,r.Z)({style:{display:"block"},disabled:I,loading:$},y),{},{onClick:(0,g.Z)((0,s.Z)().mark(function c(){var a;return(0,s.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,!i){o.next=9;break}return o.next=4,R.validateFields([i].flat(1));case 4:return a=R.getFieldValue([i].flat(1)),o.next=7,P(a);case 7:o.next=11;break;case 9:return o.next=11,P("");case 11:o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),console.log(o.t0);case 16:case"end":return o.stop()}},c,null,[[0,13]])})),children:C(I,S)}))]})}),t=(0,x.G)(n);m.Z=t},61374:function(W,m,e){var r=e(4386),s=e(79115),g=e(93236),u=e(56562),h=e(62086),b=["fieldProps","proFieldProps"],j=["fieldProps","proFieldProps"],E="text",p=function(n){var t=n.fieldProps,_=n.proFieldProps,O=(0,s.Z)(n,b);return(0,h.jsx)(u.Z,(0,r.Z)({valueType:E,fieldProps:t,filedConfig:{valueType:E},proFieldProps:_},O))},x=function(n){var t=n.fieldProps,_=n.proFieldProps,O=(0,s.Z)(n,j);return(0,h.jsx)(u.Z,(0,r.Z)({valueType:"password",fieldProps:t,proFieldProps:_,filedConfig:{valueType:E}},O))},v=p;v.Password=x,v.displayName="ProFormComponent",m.Z=v},99801:function(W,m,e){e.r(m);var r=e(3447),s=e.n(r),g=e(37066),u=e.n(g),h=e(85851),b=e.n(h),j=e(90887),E=e.n(j),p=e(78503),x=e.n(p),v=e(8040),D=e(61374),n=e(19046),t=e(41122),_=e(92466),O=e(81296),R=e(83132),K=e(43579),l=e(62086),S=["confirmPassword"],F,w,G=R.styled.div(F||(F=x()([`
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
`]))),I=R.styled.div(w||(w=x()([`
  margin-bottom: 16px;
  text-align: center;
`]))),U=function(z){var $=function(){var B=E()(s()().mark(function f(i){var T,d,C,y,Z,P;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return T=i.confirmPassword,d=b()(i,S),a.next=3,(0,_.Z)((0,K.z2)(d));case 3:C=a.sent,y=u()(C,2),Z=y[0],P=y[1],(0,O.Z)(Z)?(t.ZP.success(P),R.history.push("/login")):t.ZP.error(Z);case 8:case"end":return a.stop()}},f)}));return function(i){return B.apply(this,arguments)}}(),L=function(){var B=E()(s()().mark(function f(i){var T,d,C,y;return s()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,_.Z)((0,K.fj)(i));case 2:T=P.sent,d=u()(T,2),C=d[0],y=d[1],(0,O.Z)(C)?t.ZP.success(y):t.ZP.error(C);case 7:case"end":return P.stop()}},f)}));return function(i){return B.apply(this,arguments)}}();return(0,l.jsx)(G,{children:(0,l.jsxs)(v.A,{layout:"vertical",onFinish:$,submitter:{searchConfig:{submitText:"\u6CE8\u518C"},resetButtonProps:{style:{display:"none"}},submitButtonProps:{style:{width:"100%"}}},children:[(0,l.jsx)(D.Z,{width:"md",name:"username",label:"\u7528\u6237\u540D",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]}),(0,l.jsx)(D.Z,{width:"md",name:"nickName",label:"\u6635\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6635\u79F0"}]}),(0,l.jsx)(D.Z.Password,{width:"md",name:"password",label:"\u5BC6\u7801",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]}),(0,l.jsx)(D.Z.Password,{width:"md",name:"confirmPassword",label:"\u786E\u8BA4\u5BC6\u7801",placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",dependencies:["password"],rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"},function(B){var f=B.getFieldValue;return{validator:function(T,d){return!d||f("password")===d?Promise.resolve():(console.log(f("password")===d),Promise.reject(new Error("\u786E\u8BA4\u5BC6\u7801\u4E0E\u5BC6\u7801\u4E0D\u5339\u914D!")))}}}]}),(0,l.jsx)(D.Z,{width:"md",name:"email",label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:[{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740"},{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}]}),(0,l.jsx)(n.Z,{label:"\u9A8C\u8BC1\u7801",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(f,i){return f?"".concat(i," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",phoneName:"email",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],onGetCaptcha:L}),(0,l.jsxs)(I,{children:["\u5DF2\u6709\u8D26\u53F7? \u53BB",(0,l.jsx)(R.Link,{to:"/login",children:"\u767B\u5F55"})]})]})})};m.default=U},43579:function(W,m,e){e.d(m,{bG:function(){return b},z2:function(){return g},fj:function(){return s},gQ:function(){return h},T3:function(){return u},gS:function(){return j},uE:function(){return E}});var r=e(83132),s=function(t){return(0,r.request)("/user/register-captcha",{method:"GET",params:{address:t}})},g=function(t){return(0,r.request)("/user/register",{method:"POST",data:t})},u=function(t){return(0,r.request)("/user/update_password/captcha",{method:"GET",params:{address:t}})},h=function(t){return(0,r.request)("/user/update_password",{method:"POST",data:t})},b=function(){return(0,r.request)("/user/info")},j=function(t){return(0,r.request)("/user/update",{method:"POST",data:t})},E=function(){return(0,r.request)("/user/update/captcha")},p=e(3447),x=e(90887),v=e(51273),D=null},92466:function(W,m,e){function r(s,g){return s.then(function(u){return[null,u]}).catch(function(u){return g&&Object.assign(u,g),[u,void 0]})}m.Z=r},81296:function(W,m){function e(r){return r===null}m.Z=e}}]);
